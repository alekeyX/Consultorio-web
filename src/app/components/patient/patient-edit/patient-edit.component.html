<div class="card rounded-lg shadow mb-2 bg-white rounded animated fadeIn" *ngIf="isAdmin || isMedic">
    <div class="card-body">

        <h1 class="text-aqua-dark mb-3">Editar Paciente</h1>

        <!-- formulario para editar un paciente -->
        <form [formGroup]="angForm" (ngSubmit)="submitForm()" novalidate>

            <div class="row">
                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Código de paciente*</label>
                    <input type="text" class="form-control"
                        [ngClass]="{'is-invalid': angForm.controls['username'].errors?.required && angForm.controls['username'].touched}"
                        formControlName="username" placeholder="Código de paciente*" #username [attr.disabled]="isMedic ? true : null"/>
                    <!-- error -->
                    <div *ngIf="angForm.controls['username'].invalid && (angForm.controls['username'].dirty || angForm.controls['username'].touched)"
                        class="text-danger font-weight-light font-error">
                        <div *ngIf="angForm.controls['username'].errors.required">
                            Código de paciente es requerido.
                        </div>
                    </div>
                </div>

                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Carnet de identidad*</label>
                    <input type="text" class="form-control"
                        [ngClass]="{'is-invalid': angForm.controls['ci'].errors?.required && angForm.controls['ci'].touched}"
                        formControlName="ci" placeholder="Carnet de identidad*" #ci [attr.disabled]="isMedic ? true : null"/>
                    <!-- error -->
                    <div *ngIf="angForm.controls['ci'].invalid && (angForm.controls['ci'].dirty || angForm.controls['ci'].touched)"
                        class="text-danger font-weight-light font-error">
                        <div *ngIf="angForm.controls['ci'].errors.required">
                            Carnet de identidad es requerido.
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Nombre(s)*</label>
                    <input type="text" class="form-control"
                        [ngClass]="{'is-invalid': angForm.controls['firstName'].errors?.required && angForm.controls['firstName'].touched}"
                        formControlName="firstName" placeholder="Nombres*" #firstName [attr.disabled]="isMedic ? true : null"/>
                    <!-- error -->
                    <div *ngIf="angForm.controls['firstName'].invalid && (angForm.controls['firstName'].dirty || angForm.controls['firstName'].touched)"
                        class="text-danger font-weight-light font-error">
                        <div *ngIf="angForm.controls['firstName'].errors.required">
                            Nombre es requerido.
                        </div>
                        <div *ngIf="angForm.controls['firstName'].errors.pattern">
                            No debe tener digitos.
                        </div>
                    </div>
                </div>

                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Apellidos*</label>
                    <input type="text" class="form-control"
                        [ngClass]="{'is-invalid': angForm.controls['lastName'].errors?.required && angForm.controls['lastName'].touched}"
                        formControlName="lastName" placeholder="Apellidos*" #lastName [attr.disabled]="isMedic ? true : null"/>
                    <!-- error -->
                    <div *ngIf="angForm.controls['lastName'].invalid && (angForm.controls['lastName'].dirty || angForm.controls['lastName'].touched)"
                        class="text-danger font-weight-light font-error">
                        <div *ngIf="angForm.controls['lastName'].errors.required">
                            Apellidos son requeridos.
                        </div>
                        <div *ngIf="angForm.controls['lastName'].errors.pattern">
                            No debe tener digitos.
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Email*</label>
                    <input type="email" class="form-control" formControlName="email" placeholder="Correo Electrónico*"
                        #email />
                </div>

                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Edad</label>
                    <input type="text" class="form-control" formControlName="age" placeholder="Edad" #age />
                </div>

                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Género</label>
                    <select class="custom-select" formControlName="genero" #genero>
                        <option value="" disabled>Seleccione género</option>
                        <option *ngFor="let gen of generos" [ngValue]="gen">{{gen}}</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Grupo étnico</label>
                    <input type="text" class="form-control" formControlName="ethnicity" placeholder="Grupo étnico"
                        #ehnicity />
                </div>

                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Estado civil</label>
                    <input type="text" class="form-control" formControlName="maritalStatus" placeholder="Estado civil"
                        #maritalStatus />
                </div>

                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Ocupación</label>
                    <input type="text" class="form-control" formControlName="ocupation" placeholder="Ocupación"
                        #ocupation />
                </div>

                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Teléfono</label>
                    <input type="text" class="form-control" formControlName="phone" placeholder="Teléfono" #phone />
                    <div *ngIf="angForm.controls['phone'].invalid && (angForm.controls['phone'].dirty || angForm.controls['phone'].touched)"
                        class="text-danger font-weight-light font-error">
                        Deben ser solo digitos
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Lugar de nacimiento</label>
                    <input type="text" class="form-control" formControlName="placeBirth"
                        placeholder="Lugar de nacimiento" #placeBirth />
                </div>
                <div class="form-group col-lg">
                    <label class="col-lg mb-0">Dirección</label>
                    <input type="text" class="form-control" formControlName="address" placeholder="Dirección actual"
                        #address />
                </div>
            </div>

            <div>
                <div class="custom-file form-group">
                    <div>
                        <label class="custom-file-label" for="file">Foto de perfil</label>
                        <input type="file" id="file" #fileInput lang="es" accept="image/gif, image/png, image/jpeg"
                            FormControlName="imagePath" (change)="onFileChange($event)" class="custom-file-input">
                    </div>
                    <div class="mt-2">
                        <label class="mr-2">Sin imagen</label>
                        <input type="checkbox" (change)="withoutImage($event)">
                    </div>
                </div>
                <div class="w-100 d-flex justify-content-center" *ngIf="!deleteImage">
                    <img [src]="image" alt="foto-perfil" id="foto-perfil" class="p-2" *ngIf="image !== 'none'">
                </div>
            </div>

            <div class="form-group mt-4">
                <button type="submit" class="btn btn-block text-white bg-aqua" [disabled]="angForm.pristine || angForm.invalid">
                    Guardar
                </button>
            </div>
        </form>
        <!-- Fin del formulario -->
    </div>
</div>

<app-patient-edit-password *ngIf="isPatient || isAdmin"></app-patient-edit-password>